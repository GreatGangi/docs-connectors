= Salesforce - Upgrade and Migrate - Mule 4
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
:imagesdir: ../../assets/images/

Upgrade Anypoint Connector for Salesforce (Salesforce Connector) to version 10.0.0.

== Supported Upgrade Paths

[%header,cols="50a,50a"]
|===
|From Version | To Version
|4.2.x |5.0.0
|===

== Changes in This Release

This release contains the following changes:

* Changed operation names, metadata, fields, and values
* AQuA operations are removed from Zuora Connector. To use AQuA operations, install Zuora AQuA Connector.


== Changes in Operations Parameters

[cols="5%,17%,15%,15%,17%,15%,15%"]
|===
4+|Existing in Zuora 4.x 3+| Modified in Zuora 5.x
|Nr |Operation Name	| Input Params	|Output Params	| Operation Name	                         |Input Params	                                    |Output Params

|1| Get Account Crud
a| * Fields (String)
* Id (String)

| N/A
| CRUD: Get account
a| * id (String) (Modified)
* fields (String) (Modified)

| Attributes Type (HttpResponseAttributes) (New)

|===

== Changes in Operations Metadata

[cols="5%,17%,15%,15%,17%,15%,15%"]
|===
4+|Metadata Existing in Zuora 4.x 3+| Metadata in Zuora 5.x
|Nr |Operation Name	| Input Metadata	|Output Metadata	| Operation Name	                         |Input Metadata	                                    |Output Metadata

|1| Submit data query
| N/A
| N/A
| POST Data Query Job
a| * useIndexJoin (Boolean) (New)
* columnSeparator (String) (New)

| N/A

|===

== New Operations in Zuora Connector 5.0.0

Zuora Connector 5.0.0 includes the following new operations:

[cols="5%,25%,70%"]
|===
3+|New in Zuora 5.x
| Nr | Name	| Description

|1| CRUD: Get amendment	| This operation makes an HTTP GET request to the `/v1/object/amendment/{id}` endpoint.
|===

== Removed Operations in Zuora Connector 5.0.0

Four operations were removed from the Zuora connector and are available in the new Anypoint Connector for AQuA (AQuA Connector).

[cols="15%,35%,15%,35%"]
|===
2+|Removed in Zuora 5.x 2+| Available in Zuora AQuA 1.x as
|Name	| Description	|Name	|Description

| Aqua_  Delete A Running Job	| Delete the current job, if it is not complete, else an error is thrown. |	Delete a Running Job	|No changes
| Aqua_  Get Job Results | Retrieves an aggregate query using the Job ID. | Get Job Results | No changes
| Aqua_  Get Last Job Completed | Returns the details of the last completed job. | Get Last Job Completed | No changes
| Aqua_  Post Query Or Export Deleted Data | Post query. | Post Query or Export Deleted Data | No changes
|===

=== CRUD Operations

All of the CRUD operations were changed so that CRUD is prepended to operation names. A few examples are:

|===
|4.2.x|5.0.0

|Create import crud operation
|CRUD: Create Import operation

|Delete bill run crud
|CRUD: Delete bill run

|Get account crud
|CRUD: Get account

|Update product crud
|CRUD: Update Product
|===

=== Changes to Operations Names

Some of the operations' names are updated:

|===
|4.2.x|5.0.0

|Create revenue schedule for invoice item adjustment distribute by date range
|Create revenue schedule for invoice item adjustment (distribute by date range)

|Remove an event trigger
|DELETE Event Trigger

|Delete usage crud
|Delete usage record
|===

=== Changes in Fields and Values

Some fields and their corresponding values have changed:

* The credit memo items operation and the taxation items created in the `write-off` operation are now applied to the corresponding invoice items and invoice taxation items, respectively.
* The values of the following fields are also changed to the taxation items of credit memo items operation:
  ** taxRate +
  The value of this field is now set to `0`.
  ** exemptAmount +
  The value of this field is now set to `0`.
  ** taxRateType +
  The value of this field is now set to `null`.

== Upgrade Prerequisites

Before you perform the upgrade, you must:

. Create a backup of your files, data, and configuration in case you need to restore to the previous version.
. Install Zuora AQuA Connector to replace the AQuA operations that were previously included in Zuora Connector 4.2.x:
.. In Studio, create a Mule project.
.. In the Mule Palette view, click *Search in Exchange*.
.. In Add Modules to Project, type 'Zuora AQuA' in the search field.
.. In Available modules, select *Zuora AQuA Connector*, and then click *Add*.
.. Click *Finish*.
.. Verify that the `zuora-aqua-connector` dependency version is `1.0.0` in the pom.xml. +
Anypoint Studio upgrades the connector automatically.

== Upgrade Steps

Follow these steps to perform the upgrade to Zuora Connector 5.0.0:

.. In Studio, create a Mule project.
.. In the Mule Palette view, click *Search in Exchange*.
.. In Add Modules to Project, type 'Zuora AQuA' in the search field.
.. In Available modules, select *Zuora AQuA Connector*, and then click *Add*.
.. Click *Finish*.
.. Verify that the `zuora-connector` dependency version is `5.0.0` in the pom.xml.

Anypoint Studio upgrades the connector automatically.


== Verify the Upgrade

After you install the latest version of the connector, follow these steps to verify the upgrade:

. In Anypoint Studio, verify that there are no errors in the *Problems* or *Console* views.
. Check the project pom.xml and verify that there are no problems.
. Test the connection and verify that the operations work.

== Troubleshooting

If there are problems with caching the parameters and caching the metadata, try restarting Anypoint Studio.

== Reverting the Upgrade

If it is necessary to revert to the previous version of Zuora Connector, change the `zuora-connector` dependency version `5.0.0` in the project's pom.xml to the previous version.

You must update the project's pom.xml in Anypoint Studio.


== See Also

https://help.mulesoft.com[MuleSoft Help Center]
